## 使用 http 协议访问 Web
web 使用一种名为 http（超文本传输协议）的协议作为规范，完成从客户端到服务器等一系列运作流程。而协议是指规则的约定，可以说，web是建立在 http 协议上通讯的。

### TCP/IP
TCP确保数据包以正确的次序到达，并且尝试确认数据包的内容没有改变。TCP在IP地址之上引端口（port），它允许计算机通过网络提供各种服务。一些端口号为不同的服务保留，而且这些端口号是众所周知。<br>
TCP/IP协议最终要的一就算分层：应用层、传输层、网络层、数据链路层。使用TCP/IP进行网络通信时，会通过分层顺序与对方进行通信。发送端从应用层往下走，接收端从应用层往上走。
---
用http举例说明：<br>
客户端在应用层（http协议）发出一个http请求。传输层(tcp）对http请求进行分割，并在各个报文打上标记及端口号转发给网络层。在网络层(ip)增加作为通信目的地的Mac地址后转发给数据链路层。<br>
### IP协议 （确保将数据包送达对方（IP地址+MAC地址））
IP协议位于网络层，IP协议的作用是把各种数据包传输给对方，而且要确保送到了对方那边，需要两个条件：IP地址和MAC地址。 IP地址是节点被分配到的地址， MAC地址是网卡所属的固定地址。 IP地址可以和MAC地址进行配对，IP地址可变换，但MAC地址基本不会改变。
#### 使用 ARP 协议凭借 MAC 地址进行通讯。
IP间的通讯依赖 MAC 地址，在网络上，通讯双方在同一局域网（LAN）内的情况很少，通常是经过多台计算机和网络设备中转才能连接到对方。在进行中转时，会利用下一站中转设备的MAC地址来搜索下一个中转目标。这时，会采用 ARP 协议。ARP 是一种用以解析地址的协议，根据通信方的 IP 地址就可以反查出对应的 MAC 地址。
#### 确保可靠的 TCP 协议（将数据分割成报文段为单位的数据包，三次握手）
TCP 位于传输层，提供可靠的字节流服务。<br>
字节流服务： 为了方便传输，将大块的数据分割为报文段为单位的数据包进行管理。可靠服务是指：将数据准确地传输给地方。    TCP为了更容易传送大数据才把数据分割，而且 TCP 能确认数据最终是否送达到对方。
---
为了确保准确地将数据传送到目的处。TCP协议采用三次握手策略。 握手中使用了 TCP 的标志 SYN 和 ACK<br>
过程：<br>
发送端首先发送一个带有 SYN 标志的数据包给对方。
接收端接收到后，回传一个带有 SYN/ACK 标志的数据包以示传送确认信息。
最后发送端再回传一个带 ACK 标志的数据包，代表握手接受。

#### 负责域名解析的 DNS 服务
DNS 和 http 一样位于应用层，提供域名到 IP 地址之间的解析服务。<br>
计算机既可以被赋予 IP 地址，也可以被赋予 主机名和域名。比如 www.hackr.jp。用户通常使用主机名或者域名的方法去访问对方的计算机，而不是通过 IP 地址，因为与 IP 地址的一穿纯数字相比， 用字母配合数字的表示形式来指定计算机名更符合人类的记忆习惯。<br>
而 DNS 可以将 主机名和域名转换为 IP 地址。

### 各种协议和 http 的关系
客户端想请求https://www.baidu.com Web 页面：
1. 首先通过 DNS 服务解析对应的 IP 地址。（应用层）
2. http协议生成对目标 Web 服务器的的 HTTP 请求报文。（应用层）
3. TCP 协议将 http 请求报文按序号分割成报文段，然后把每个报文段可靠的传输给对方。（传输层）
4. IP 协议搜索对方的地址，一边中转一边传送。（网络层）
服务端：
1. TCP 接受到了报文段，按顺序重组报文段。
2. http协议对 Web请求的内容进行处理。然后用相同的方法将处理结果回传。

#### URI 和 URL
URI: 统一资源标识符。用字符串表示某一互联网资源<br>
URL: 统一资源定位符。用字符串标识资源地点<br>
URL 是 URI 的子集。
---
URI 格式:<br>
表示指定的 URI 要使用涵盖全部必要信息的绝对 URI、绝对 URL 和相对 URL。相对 URL 是指从浏览器中基本 URI 处指定的 URL，形如 /image/logo.gif<br>
绝对 URI 格式：
```
http://user:pass@www.example.jp:80/dir/index.html?uid=1#ch1
      
协议   登录信息 服务器地址(域名) 端口号  文件路径    查询字符串 判断标识符
```
1. 协议方案名 使用 http https 等协议方案名获取访问资源时要指定协议类型，不区分大小写，最后附一个冒号:。
2. 登录信息(认证) 指定用户名和密码作为从服务器端获取资源时的必要信息，可选。
3. 服务器地址，可以是 www.baidu.com 这种可以被 dns解析的名称。也可以是 192.168.1.1 这种 IPv4 地址，也可以是 [0: 0: 0: 0: 0: 0: 0: 1] 这种 IPv6 地址。
4. 端口号 服务端链接的端口号，可选 省略使用默认端口
5. 带层次的文件路径 指定服务器上的文件路径来定位资源。
6. 查询字符串，针对已制定的文件路径内资源，可以使用查询字符串传入任意参数，可选。
7. 判断标识符 标记出已获取资源的子资源 可选。
